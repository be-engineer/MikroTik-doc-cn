# Introduction

Many RouterOS devices have [GPS](https://help.mikrotik.com/docs/display/ROS/GPS) support. It allows RouterOS to determine the precise location of its GPS receiver. GPS coordinates will indicate the latitude and the longitude values (among other parameters) of the current position.

Let's say, you have [LTAP](https://mikrotik.com/product/ltap) (or any other RouterOS device with GPS support) and you wish to track its location. You want the router to send this data to a server, where the data will be stored and integrated into a map, as it is more convenient to monitor. In this guide, we will showcase how you can do that. This scenario will utilize MQTT protocol communication with a platform called [ThingsBoard](https://thingsboard.io/).

ThingsBoard has a cloud solution and different local installation options (on different OS).

Since we've added a [container](https://help.mikrotik.com/docs/display/ROS/Container) feature, it became possible to also run the platform within the RouterOS. Meaning, you can build this scenario, solely on RouterOS units → devices with GPS support that you wish to track (for example, cars equipped with [LTAP](https://mikrotik.com/product/ltap)s → RouterOS devices that act as **MQTT publishers**), and a ThingsBoard server run within a more powerful RouterOS device (like a [CHR](https://help.mikrotik.com/docs/pages/viewpage.action?pageId=18350234) machine → RouterOS device that acts as an **MQTT broker**).

If you want to choose this route (container route), make sure to pick the devices that you plan on using as a "server" carefully, because this implementation can be heavy on RAM usage (it is suggested to have a device that has at least **2 GB** **RAM** or **1 GB RAM** **with minimal load** and is either **ARM64** or **AMD64** architecture).

# Configuration

In this guide, we will demonstrate how to configure a GPS receiver (MQTT publisher) and how to set up ThingsBoard.

In case you want to use the container feature to run the ThingsBoard instance (MQTT broker), check the guide [over here](https://help.mikrotik.com/docs/pages/viewpage.action?pageId=166920348). General guidelines on ThingsBoard and MQTT configuration can be found in the guide [over here](https://help.mikrotik.com/docs/display/ROS/MQTT+and+ThingsBoard+configuration). Make sure to explore both guides as they will have additional useful information.

Before proceeding, make sure that the ThingsBoard is up and running and that you are able to access its WEB management portal. Confirm that the MQTT port is open or/and port-forwarded properly.

**Package requirement:** `gps, iot`

## ThingsBoard preparation

This example will showcase [access-token](https://help.mikrotik.com/docs/display/ROS/MQTT+and+ThingsBoard+configuration#MQTTandThingsBoardconfiguration-Accesstokenscenario.1) and [one-way SSL communication via access-token](https://help.mikrotik.com/docs/display/ROS/MQTT+and+ThingsBoard+configuration#MQTTandThingsBoardconfiguration-One-waySSLcommunicationscenario.1) scenarios for simplicity reasons, but you can use other available options as well.

Navigate to the "**Devices**" menu and add a new device via the "**Add new device**" button → name it and create it (for example, LTAP):

![](https://help.mikrotik.com/docs/download/attachments/166920428/image-2023-2-1_12-51-0.png?version=1&modificationDate=1675248641759&api=v2)

Click on the device you've just added, go to the "**Details**" section, and generate an access token under the "**Manage credentials/Device Credentials**" setting:

![](https://help.mikrotik.com/docs/download/attachments/166920428/image-2023-2-1_13-5-15.png?version=1&modificationDate=1675249496173&api=v2)

## MQTT broker configuration

In case it is a local test or the broker is available through the VPN, you can use non-SSL MQTT:

[?](https://help.mikrotik.com/docs/display/ROS/GPS-tracking+using+MQTT+and+ThingsBoard#)

<table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2" data-bidi-marker="true"><code class="ros constants">/iot/mqtt/brokers/</code><code class="ros functions">add </code><code class="ros value">name</code><code class="ros plain">=tb</code> <code class="ros value">address</code><code class="ros plain">=x.x.x.x</code> <code class="ros value">port</code><code class="ros plain">=1883</code> <code class="ros value">username</code><code class="ros plain">=access_token</code></div></div></td></tr></tbody></table>

Where:

-   `name` is the name that you wish to give to the broker and this name will be used later in the script;
-   `address` is the IP address of the broker;
-   `port` is the TCP port that the broker is listening for → for non-SSL it is typically TCP 1883;
-   `username` is dictated by the MQTT broker and, in our case, it is an "access token" that was generated in the ThingsBoard management portal.

In case it is public access (when you want to access the broker via its public IP address), **we advise you to use SSL MQTT**:

[?](https://help.mikrotik.com/docs/display/ROS/GPS-tracking+using+MQTT+and+ThingsBoard#)

<table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2" data-bidi-marker="true"><code class="ros constants">/iot/mqtt/brokers/</code><code class="ros functions">add </code><code class="ros value">name</code><code class="ros plain">=tb</code> <code class="ros value">address</code><code class="ros plain">=x.x.x.x</code> <code class="ros value">port</code><code class="ros plain">=8883</code> <code class="ros value">username</code><code class="ros plain">=access_token</code> <code class="ros value">ssl</code><code class="ros plain">=yes</code></div></div></td></tr></tbody></table>

Where:

-   `name` is the name that you wish to give to the broker and this name will be used later in the script;
-   `address` is the IP address of the broker;
-   `port` is the TCP port that the broker is listening for → for SSL it is typically TCP 8883;
-   `username` is dictated by the MQTT broker, and, in our case, it is an "access token" that was generated in the ThingsBoard management portal;
-   `ssl` enables SSL MQTT communication.

## MQTT publish

You can test MQTT publish with a static message by using the command:

[?](https://help.mikrotik.com/docs/display/ROS/GPS-tracking+using+MQTT+and+ThingsBoard#)

<table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2" data-bidi-marker="true"><code class="ros constants">/iot/mqtt/publish broker="tb" topic="v1/devices/me/telemetry" message="{\"test\":\"123\"}"</code></div></div></td></tr></tbody></table>

To post GPS coordinates, import the script shown below:

[?](https://help.mikrotik.com/docs/display/ROS/GPS-tracking+using+MQTT+and+ThingsBoard#)

<table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2" data-bidi-marker="true"><code class="ros constants">/system/script/</code><code class="ros functions">add </code><code class="ros value">dont-require-permissions</code><code class="ros plain">=no</code> <code class="ros value">name</code><code class="ros plain">=mqttgps</code> <code class="ros value">owner</code><code class="ros plain">=admin</code> <code class="ros value">policy</code><code class="ros plain">=</code><code class="ros plain">"ftp,re\</code></div><div class="line number2 index1 alt1" data-bidi-marker="true"><code class="ros spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ros plain">boot,read,write,policy,test,password,sniff,sensitive,romon" \</code></div><div class="line number3 index2 alt2" data-bidi-marker="true"><code class="ros spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ros value">source</code><code class="ros plain">=</code><code class="ros plain">"&nbsp;&nbsp;&nbsp; </code><code class="ros comments">###Configuration###\r\</code></div><div class="line number4 index3 alt1" data-bidi-marker="true"><code class="ros spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ros plain">\n&nbsp;&nbsp;&nbsp; </code><code class="ros comments">#Enter pre-configured broker's name within \"\":\r\</code></div><div class="line number5 index4 alt2" data-bidi-marker="true"><code class="ros spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ros plain">\n&nbsp;&nbsp;&nbsp; </code><code class="ros constants">:</code><code class="ros functions">local </code><code class="ros plain">broker \"tb\"\r\</code></div><div class="line number6 index5 alt1" data-bidi-marker="true"><code class="ros spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ros plain">\n&nbsp;&nbsp;&nbsp; </code><code class="ros comments">#Enter the topic name within \"\", per the broker's config\</code></div><div class="line number7 index6 alt2" data-bidi-marker="true"><code class="ros spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ros plain">uration</code><code class="ros constants">:\r\</code></div><div class="line number8 index7 alt1" data-bidi-marker="true"><code class="ros spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ros plain">\n&nbsp;&nbsp;&nbsp; </code><code class="ros constants">:</code><code class="ros functions">local </code><code class="ros plain">topic \"v1</code><code class="ros constants">/devices/me/telemetry\"\r\</code></div><div class="line number9 index8 alt2" data-bidi-marker="true"><code class="ros spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ros plain">\n\r\</code></div><div class="line number10 index9 alt1" data-bidi-marker="true"><code class="ros spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ros plain">\n&nbsp;&nbsp;&nbsp; </code><code class="ros comments">###Variables####\r\</code></div><div class="line number11 index10 alt2" data-bidi-marker="true"><code class="ros spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ros plain">\n&nbsp;&nbsp;&nbsp; </code><code class="ros constants">:</code><code class="ros functions">global </code><code class="ros plain">lat\r\</code></div><div class="line number12 index11 alt1" data-bidi-marker="true"><code class="ros spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ros plain">\n&nbsp;&nbsp;&nbsp; </code><code class="ros constants">:</code><code class="ros functions">global </code><code class="ros plain">lon\r\</code></div><div class="line number13 index12 alt2" data-bidi-marker="true"><code class="ros spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ros plain">\n&nbsp;&nbsp;&nbsp; </code><code class="ros constants">:</code><code class="ros functions">global </code><code class="ros plain">alt1\r\</code></div><div class="line number14 index13 alt1" data-bidi-marker="true"><code class="ros spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ros plain">\n&nbsp;&nbsp;&nbsp; </code><code class="ros constants">:</code><code class="ros functions">global </code><code class="ros plain">alt2\r\</code></div><div class="line number15 index14 alt2" data-bidi-marker="true"><code class="ros spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ros plain">\n\r\</code></div><div class="line number16 index15 alt1" data-bidi-marker="true"><code class="ros spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ros plain">\n&nbsp;&nbsp;&nbsp; </code><code class="ros comments">###GPS####\r\</code></div><div class="line number17 index16 alt2" data-bidi-marker="true"><code class="ros spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ros plain">\n&nbsp;&nbsp;&nbsp; </code><code class="ros constants">:</code><code class="ros functions">put </code><code class="ros plain">(\"[*] Capturing GPS coordinates...\")\r\</code></div><div class="line number18 index17 alt1" data-bidi-marker="true"><code class="ros spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ros plain">\n&nbsp;&nbsp;&nbsp; </code><code class="ros constants">/system gps </code><code class="ros functions">monitor </code><code class="ros plain">once </code><code class="ros value">do</code><code class="ros plain">=</code><code class="ros plain">{\r\</code></div><div class="line number19 index18 alt2" data-bidi-marker="true"><code class="ros spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ros plain">\n&nbsp;&nbsp;&nbsp; </code><code class="ros constants">:</code><code class="ros functions">set </code><code class="ros plain">\</code><code class="ros keyword">$lat</code> <code class="ros plain">\$(\"latitude\");\r\</code></div><div class="line number20 index19 alt1" data-bidi-marker="true"><code class="ros spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ros plain">\n&nbsp;&nbsp;&nbsp; </code><code class="ros constants">:</code><code class="ros functions">set </code><code class="ros plain">\</code><code class="ros keyword">$lon</code> <code class="ros plain">\$(\"longitude\");\r\</code></div><div class="line number21 index20 alt2" data-bidi-marker="true"><code class="ros spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ros plain">\n&nbsp;&nbsp;&nbsp; </code><code class="ros constants">:</code><code class="ros functions">set </code><code class="ros plain">\</code><code class="ros keyword">$alt1</code> <code class="ros plain">\$(\"altitude\")}\r\</code></div><div class="line number22 index21 alt1" data-bidi-marker="true"><code class="ros spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ros plain">\n&nbsp;&nbsp;&nbsp; </code><code class="ros comments">###remove \"meters\" from the value because JSON format wi\</code></div><div class="line number23 index22 alt2" data-bidi-marker="true"><code class="ros spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ros plain">ll not understand it</code><code class="ros comments">###\r\</code></div><div class="line number24 index23 alt1" data-bidi-marker="true"><code class="ros spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ros plain">\n&nbsp;&nbsp;&nbsp; </code><code class="ros constants">:</code><code class="ros functions">set </code><code class="ros plain">\</code><code class="ros keyword">$alt2</code> <code class="ros plain">[</code><code class="ros constants">:</code><code class="ros functions">pick </code><code class="ros plain">\</code><code class="ros keyword">$alt1</code> <code class="ros plain">0 [</code><code class="ros functions">find </code><code class="ros plain">\</code><code class="ros keyword">$alt1</code> <code class="ros plain">\" m\"]]\r\</code></div><div class="line number25 index24 alt2" data-bidi-marker="true"><code class="ros spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ros plain">\n\r\</code></div><div class="line number26 index25 alt1" data-bidi-marker="true"><code class="ros spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ros plain">\n&nbsp;&nbsp;&nbsp; </code><code class="ros constants">:</code><code class="ros functions">local </code><code class="ros plain">message \\\r\</code></div><div class="line number27 index26 alt2" data-bidi-marker="true"><code class="ros spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ros plain">\n&nbsp;&nbsp;&nbsp; \"{\\\"latitude\\\"</code><code class="ros constants">:\$lat,\\\r\</code></div><div class="line number28 index27 alt1" data-bidi-marker="true"><code class="ros spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ros plain">\n&nbsp;&nbsp;&nbsp; \\\"longitude\\\"</code><code class="ros constants">:\$lon,\\\r\</code></div><div class="line number29 index28 alt2" data-bidi-marker="true"><code class="ros spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ros plain">\n&nbsp;&nbsp;&nbsp; \\\"altitude\\\"</code><code class="ros constants">:\$alt2}\"\r\</code></div><div class="line number30 index29 alt1" data-bidi-marker="true"><code class="ros spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ros plain">\n\r\</code></div><div class="line number31 index30 alt2" data-bidi-marker="true"><code class="ros spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ros plain">\n&nbsp;&nbsp;&nbsp; </code><code class="ros comments">###MQTT###\r\</code></div><div class="line number32 index31 alt1" data-bidi-marker="true"><code class="ros spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ros plain">\n&nbsp;&nbsp;&nbsp; </code><code class="ros constants">:</code><code class="ros functions">if </code><code class="ros plain">(\</code><code class="ros keyword">$lat</code> <code class="ros plain">!</code><code class="ros plain">=</code> <code class="ros plain">\"none\") </code><code class="ros value">do</code><code class="ros plain">=</code><code class="ros plain">{\\\r\</code></div><div class="line number33 index32 alt2" data-bidi-marker="true"><code class="ros spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ros plain">\n&nbsp;&nbsp;&nbsp; </code><code class="ros constants">:</code><code class="ros functions">put </code><code class="ros plain">(\"[*] Sending message to MQTT broker...\");\r\</code></div><div class="line number34 index33 alt1" data-bidi-marker="true"><code class="ros spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ros plain">\n&nbsp;&nbsp;&nbsp; </code><code class="ros constants">/iot mqtt publish broker=\$broker topic=\$topic message=\$\</code></div><div class="line number35 index34 alt2" data-bidi-marker="true"><code class="ros spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ros plain">message} </code><code class="ros value">else</code><code class="ros plain">=</code><code class="ros plain">{</code><code class="ros constants">:</code><code class="ros functions">put </code><code class="ros plain">(\"[*] </code><code class="ros value">Lattitude</code><code class="ros plain">=none,</code> <code class="ros plain">not posting anything!\</code></div><div class="line number36 index35 alt1" data-bidi-marker="true"><code class="ros spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ros plain">\</code><code class="ros string">");:log info \"Latitude=none, not posting anything!\"}"</code></div></div></td></tr></tbody></table>

In short, the script captures GPS information, specifically the latitude, longitude, and altitude values. Then it structures a JSON message out of them. In case, at the moment when the script is initiated, the latitude value equals anything other than "none" (equals any actual value-number) → it sends the JSON message via MQTT to the broker named "**tb**". In case, the GPS data can not be captured →  "latitude" is recognized as "none" →  the script just logs that nothing could be captured and does nothing else.

This is a very basic example. Feel free to alter the script and add your own "if" (maybe an email notification if there is no GPS signal) and additional parameters (any other RouterOS captured value, like, maybe, its firmware version) per your requirements.

Run the script with the command:

[?](https://help.mikrotik.com/docs/display/ROS/GPS-tracking+using+MQTT+and+ThingsBoard#)

<table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2" data-bidi-marker="true"><code class="ros constants">/system/script/run mqttgps</code></div><div class="line number2 index1 alt1" data-bidi-marker="true"><code class="ros plain">[*] Capturing GPS coordinates...</code></div><div class="line number3 index2 alt2" data-bidi-marker="true"><code class="ros spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ros plain">date-</code><code class="ros variable">and</code><code class="ros plain">-time</code><code class="ros constants">: feb/01/2023 10:39:37</code></div><div class="line number4 index3 alt1" data-bidi-marker="true"><code class="ros spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ros plain">latitude</code><code class="ros constants">: 56.969862</code></div><div class="line number5 index4 alt2" data-bidi-marker="true"><code class="ros spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ros plain">longitude</code><code class="ros constants">: 24.162425</code></div><div class="line number6 index5 alt1" data-bidi-marker="true"><code class="ros spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ros plain">altitude</code><code class="ros constants">: 31.799999 m</code></div><div class="line number7 index6 alt2" data-bidi-marker="true"><code class="ros spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ros plain">speed</code><code class="ros constants">: 1.000080 km/h</code></div><div class="line number8 index7 alt1" data-bidi-marker="true"><code class="ros spaces">&nbsp;&nbsp;</code><code class="ros plain">destination-bearing</code><code class="ros constants">: none</code></div><div class="line number9 index8 alt2" data-bidi-marker="true"><code class="ros spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ros plain">true-bearing</code><code class="ros constants">: 153.089996 deg. True</code></div><div class="line number10 index9 alt1" data-bidi-marker="true"><code class="ros spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ros plain">magnetic-bearing</code><code class="ros constants">: 0.000000 deg. Mag</code></div><div class="line number11 index10 alt2" data-bidi-marker="true"><code class="ros spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ros plain">valid</code><code class="ros constants">: yes</code></div><div class="line number12 index11 alt1" data-bidi-marker="true"><code class="ros spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ros plain">satellites</code><code class="ros constants">: 6</code></div><div class="line number13 index12 alt2" data-bidi-marker="true"><code class="ros spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ros plain">fix-quality</code><code class="ros constants">: 1</code></div><div class="line number14 index13 alt1" data-bidi-marker="true"><code class="ros spaces">&nbsp;&nbsp;</code><code class="ros plain">horizontal-dilution</code><code class="ros constants">: 1.42</code></div><div class="line number15 index14 alt2" data-bidi-marker="true"><code class="ros spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ros plain">data-age</code><code class="ros constants">: 0s</code></div><div class="line number16 index15 alt1" data-bidi-marker="true"><code class="ros plain">[*] Sending message to MQTT broker...</code></div></div></td></tr></tbody></table>

To automate the process, add a [scheduler](https://help.mikrotik.com/docs/display/ROS/Scheduler) (to run the script, for example, every 30 seconds):

[?](https://help.mikrotik.com/docs/display/ROS/GPS-tracking+using+MQTT+and+ThingsBoard#)

<table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2" data-bidi-marker="true"><code class="ros constants">/system/scheduler/</code><code class="ros functions">add </code><code class="ros value">name</code><code class="ros plain">=mqttgpsscheduler</code> <code class="ros value">interval</code><code class="ros plain">=30s</code> <code class="ros value">on-event</code><code class="ros plain">=</code><code class="ros string">"/system/script/run mqttgps"</code></div></div></td></tr></tbody></table>

# Result verification

Go the the "Latest telemetry" section under your created device and confirm that the data was posted:

![](https://help.mikrotik.com/docs/download/attachments/166920428/image-2023-2-1_13-15-24.png?version=1&modificationDate=1675250105501&api=v2)

# Data visualization using maps

ThingsBoard allows you to use [Widgets](https://thingsboard.io/docs/user-guide/ui/widget-library/) to create visually appealing dashboards. In our case, we want to track our LTAP GPS coordinates, so we will need a map widget.

Select the latitude and longitude values and click on the "**Show on widget**" button:

![](https://help.mikrotik.com/docs/download/attachments/166920428/image-2023-2-1_13-20-36.png?version=1&modificationDate=1675250417648&api=v2)

Find the "**Maps**" bundle and click on the "**Add to dashboard**":

![](https://help.mikrotik.com/docs/download/attachments/166920428/image-2023-2-1_13-21-49.png?version=1&modificationDate=1675250490676&api=v2)

Select an existing dashboard or create a new one and name it however you like:

![](https://help.mikrotik.com/docs/download/attachments/166920428/image-2023-2-1_13-23-9.png?version=1&modificationDate=1675250570740&api=v2)

Run the script via the scheduler or manually and check the result:

![](https://help.mikrotik.com/docs/download/attachments/166920428/image-2023-2-1_13-27-0.png?version=1&modificationDate=1675250801888&api=v2)

Now, we can install it on a moving target and track its location:

![](https://help.mikrotik.com/docs/download/attachments/166920428/image-2023-2-2_15-12-5.png?version=1&modificationDate=1675343523993&api=v2)