# 摘要

有很多方法可以使用路由器上的端口。最明显的是在安装后使用串口进行RouterOS的初始配置（默认情况下串口0被串口终端所使用）。

串口和USB端口也可以:

- 连接3G调制解调器。
- 通过串行电缆连接到另一个设备
- 远程访问连接到串行电缆的设备。

## 常规的

**Sub-menu:** `/port`

菜单列出了路由器上所有可用的串口和USB，允许配置端口参数，如波特率、流量控制等。

下面可以看到RB493的默认端口配置。

```shell
[admin@RB493G] /port> print
Flags: I - inactive
# NAME CHANNELS USED-BY BAUD-RATE
0 serial0 1 serial-terminal 115200
```

端口列表由RouterOS自动维护。

## 属性

| 属性                                                        | 说明                                                                                                                  |
| ----------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------- |
| **baud-rate** (_integer                                     | auto_; Default: **auto**)                                                                                             | 端口波特率（速度）。如果设置为**auto**，那么RouterOS将尝试自动检测波特率。 |
| **data-bits** (_7 \| 8_; Default: )                         | 每个字符的数据位数:<br>- **7** - 真正的ASCII<br>- **8** - 任何数据(与一个字节的大小相匹配)                            |
| **dtr** (_on \| off_; Default: )                            | 是否启用流量控制使用的RS-232 DTR信号电路。                                                                            |
| **flow-control** (_hardware \| none \| xon-xoff_;Default: ) | 流控方法是暂停和恢复数据的传输。                                                                                      |
| **name** (_string_; Default: )                              | 端口的名称。                                                                                                          |
| **parity** (_even \| none \| odd_; Default: )               | 错误检测方法。如果启用，将发送额外的位来检测通信错误。在大多数情况下，奇偶校验被设置为 **无**，错误由通信协议来处理。 |
| **rts** (_on \| off_; Default: )                            | 是否启用RS-232 RTS信号流量控制。                                                                                      |
| **stop-bits** (_1 \| 2_; Default: )                         | 每个字符后发送停止位。电子设备通常使用1个停止位。                                                                     |

**只读属性**

| 属性                       | 说明                                                                    |
| -------------------------- | ----------------------------------------------------------------------- |
| **channels** (_integer_)   | 端口支持的通道数量。                                                    |  |
| **inactive** (_yes \| no_) |                                                                         |
| **line-state** ()          |                                                                         |
| **used-by** (_string_)     | 显示谁在使用当前端口。默认情况下，**Serial0**是由serial-console使用的。 |

## 固件

**Sub-menu:** `/port firmware`

这个子菜单允许指定**目录**，3g调制解调器的驱动程序可以在哪里上传使用。

## 远程访问

**Sub-menu：** `/port remote-access`

如果你想访问只能与COM端口对话的串行设备，并且位于路由器后面，可以使用远程访问。

正如RFC 2217所定义的那样，RouterOS可以通过TCP连接从一个串行设备传输数据。

在RouterOS上启用远程访问是非常容易的。

`/port remote-access add port=serial0 protocol=rfc2217 tcp-port=9999`

默认情况下，serial0被serial-terminal使用。如果不释放这个端口，就不能被远程访问或其他服务使用。

## 属性

| 属性                                                               | 说明                                                                                                       |
| ------------------------------------------------------------------ | ---------------------------------------------------------------------------------------------------------- |
| **allowed-addresses** (_IP address range_; Default: **0.0.0.0/0**) | 允许远程访问端口的IP地址范围。                                                                             |  |
| **channel** (_integer[0..4294967295]_; Default: **0**)             | 将被使用的端口通道。如果端口只有一个通道，那么通道号总是 **0**。                                           |
| **disabled** (_yes \| no_; Default: **no**)                        |                                                                                                            |
| **local-address** (_IP address_; Default: )                        | IP地址作为源地址使用。                                                                                     |
| **log-file** (_string_; Default: **""**)                           | 文件名称，通信将被记录下来。默认日志记录是禁用的。                                                         |  |
| **port** (_string_; Default: )                                     | 端口列表中的端口名称。                                                                                     |
| **protocol** (_raw \| rfc2217_; Default: **rfc2217**)              | RFC 2217定义了一个通过TCP从/向串行设备传输数据的协议。如果设置为 **raw**，那么数据将按原样发送至串行设备。 |
| **tcp-port** (_integer[1..65535]_; Default: **0**)                 | TCP端口，用于监听进入的连接。                                                                              |

**只读属性**

| 属性                              | 说明                             |
| --------------------------------- | -------------------------------- |
| **active** (_yes \| no_)          | 远程访问是否激活并准备接受连接。 |
| **busy** (_yes \| no_)            | 当前端口是否繁忙。               |
| **inactive** (_yes \| no_)        |
| **inactive** (_yes \| no_)        |
| **logging-active** (_yes \| no_)  | 当前是否正在运行文件的日志记录。 |
| **remote-address** (_IP address_) | 当前正在连接远程位置的IP地址。   |
