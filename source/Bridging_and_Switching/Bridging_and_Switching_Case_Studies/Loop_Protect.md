# 环路保护

环路保护功能可以通过发送环路保护协议数据包来防止第二层环路，并在接口收到源自自身的环路保护数据包时关闭它们。该功能的工作原理是将收到的环路保护数据包的源MAC地址与启用环路保护的接口的MAC地址进行对比。如果发现匹配，环路保护将禁用收到环路保护数据包的接口。日志消息会警告这个事件，接口被系统标记为循环保护。RouterOS的环路保护功能可以用在桥接的接口上，也可以用在RouterBoard交换芯片中设置为交换的以太网接口上。

环路保护在以太网、VLAN、EoIP、VxLAN接口上工作，其数据包以EtherType 0x9003进行封装。 
系统支持调整环路保护包的发送间隔和接口禁用时间。配置改变或禁用时间过期，会重置接口上的环路保护。

!!!tip 尽管环路保护可以在添加到网桥的接口上工作，但仍然建议使用(R/M)STP而不是环路保护，因为(R/M)STP与大多数交换机兼容，STP变体提供更多的配置选项来微调你的网络。
  
**Sub-menu:** `/interface ethernet /interface vlan /interface eoip /interface eoipv6 /interface vxlan`

| 属性                                                                                                                                                                        | 说明                                                          |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------- |
| **loop-protect** (_on                                             \| off                                                                 \| default_; Default: **default**) | 在选定的接口上启用或禁用环路保护。 **默认** 为禁用。          |
| **loop-protect-send-interval** (_time interval_; Default: **5s**)                                                                                                           | 设置在选定的接口上发送环路保护数据包的频率。                  |
| **loop-protect-disable-time** (_time interval                     \| 0_; Default: **5m**)                                                                                   | 设置当检测到环路时，所选接口被禁用的时间。 **0** - 代表永久。 |
  
**只读属性**

| 属性                                              | 说明                                                                                                                                                                                            |
| ------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **loop-protect-status** (_on \| off  \| disable_) | <br>- **on** - 循环保护功能已打开，接口正在发送和监听循环保护数据包。<br>- **off** - 循环保护功能已关闭<br>- **disable** - 环路保护功能打开时，接口已收到环路保护数据包，并禁用自己以防止环路。 |
